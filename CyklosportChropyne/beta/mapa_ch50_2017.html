<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:2; }
        #map { position:absolute; top:0; bottom:0; width:100% }
    </style>
</head>
<body>

<style>
    .mapboxgl-popup {
        max-width: 300px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
	.mapboxgl-ctrl-compass {
    display: none !important;
    }
</style>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicHJvY2huYSIsImEiOiJjaXp4OHkzamQwMW82MzNrN3FxdDhydXR6In0.7O8HkR4SgD2gq3HgDzLU-Q';

var bounds = [
    [17.1284, 49.0968], // Southwest coordinates
    [17.6543, 49.3560]  // Northeast coordinates
];

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/prochna/cj0036d6p00k12ro4yav4ixaz',
	center: [17.388,49.242],
    zoom: 11.5,
	maxBounds: bounds // Sets bounds as max
});

map.on('load', function () {

    // Add a layer showing the places.
    map.addLayer({
        "id": "places",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Přejezd silnice nad obcí Kostelany</strong><p>Přejezd silnice č. 42819 nad obcí Kostelany. Možnost stihnout závodníky po průjezdu občerstvovací stanicí u sportovní haly v Kostelanech. Předpokládaný průjezd čela závodu: <strong>45 min od času startu závodu</strong> <a href=\"https://www.google.cz/maps/@49.2006337,17.3756984,3a,75y,178.86h,69.31t/data=!3m6!1e1!3m4!1s3v9ZDp8qBCB6aDHeE1NZIQ!2e0!7i13312!8i6656!5m1!1e4?hl=cs\" target=\"_blank\" title=\"Otevře se v novém okně\">Ukázat na Google Street View</a></p>",
                        "icon": "ch50_ikony_mapa_meet_point2"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [17.375612, 49.200562]
                    }
                }, {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Odbočka u Drahlova</strong><p> Odbočka u obce Drahlov ze silnice č. 43220 na polní cestu směrem Hvězda. Předpokládaný průjezd čela závodu: <strong>1:20 h od času startu závodu</strong> <a href=\"https://www.google.cz/maps/@49.2545703,17.3772578,3a,75y,121.51h,67.6t/data=!3m6!1e1!3m4!1slHVBFNE6flFDg2vvT-wKyw!2e0!7i13312!8i6656!5m1!1e4?hl=cs\" target=\"_blank\" title=\"Otevře se v novém okně\">Ukázat na Google Street View</a></p>",
                        "icon": "ch50_ikony_mapa_meet_point2"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [ 17.377223, 49.254597]
                    }
                }, {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Občerstvovací stanice Kostelany</strong><p> Předpokládaný průjezd čela závodu: <strong>30 min od času startu závodu</strong> <a href=\"https://www.google.com/maps/@49.201383,17.384351,3a,75y,83.52h,74.28t/data=!3m6!1e1!3m4!1sr7wZ5eW1m1BvOw8psz-GwA!2e0!7i13312!8i6656\" target=\"_blank\" title=\"Otevře se v novém okně\">Ukázat na Google Street View</a></p>",
                        "icon": "ch50_ikony_mapa_pit-stop2"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [ 17.384289, 49.201413]
                    }
                },{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Občerstvovací stanice Milovice</strong><p> Předpokládaný průjezd čela závodu: <strong>1:10 h od času startu závodu</strong> <a href=\"https://www.google.com/maps/place/Milovice,+768+02+Sob%C4%9Bsuky,+%C4%8Cesko/@49.2211578,17.3618892,3a,75y,291.39h,75.09t/data=!3m7!1e1!3m5!1sxwz23rO0CWkHGGOffv9pmw!2e0!6s%2F%2Fgeo0.ggpht.com%2Fcbk%3Fpanoid%3Dxwz23rO0CWkHGGOffv9pmw%26output%3Dthumbnail%26cb_client%3Dmaps_sv.tactile.gps%26thumb%3D2%26w%3D203%26h%3D100%26yaw%3D63.75861%26pitch%3D0%26thumbfov%3D100!7i13312!8i6656!4m5!3m4!1s0x4713051efba377d1:0x752b97b531bc7e04!8m2!3d49.2216972!4d17.3562648!6m1!1e1\" target=\"_blank\" title=\"Otevře se v novém okně\">Ukázat na Google Street View</a></p>",
                        "icon": "ch50_ikony_mapa_pit-stop2"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [ 17.361391, 49.220806]
                    }
                }]
            }
        },
        "layout": {
            "icon-image": "{icon}",
			"icon-size":0.3,
        }
    });
});


map.on('load', function () {

    // Add a layer showing the places.
    map.addLayer({
        "id": "vystaviste",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Výstaviště Floria</strong><p> Více než 20 000 m², moderní zázemí, pevné stánky, restaurace, ozvučení, ostraha, WC, zázemí a prostory pro doprovodný program. <a href=\"http://www.vystavistefloria.cz/\" target=\"_blank\" title=\"Otevře se v novém okně\">www.vystavistefloria.cz</a></p>",
                        "icon": "logo_floria_new"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [  17.393121513788874, 49.284523644823985]
                    }
                }]
            }
        },
        "layout": {
            "icon-image": "{icon}",
			"icon-size":0.35,
            "icon-offset": [0, -75],
        }
    });
});


map.on('load', function () {

    // Add a layer showing the places.
    map.addLayer({
        "id": "kostelany",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Ranč Kostelany</strong><p>Divoký západ na dosah! Westernové městečko, restaurace, ubytování, aquacentrum. <a href=\"http://www.kostelany.cz\" target=\"_blank\" title=\"Otevře se v novém okně\">www.kostelany.cz</a></p>",
                        "icon": "logo_kostelany_new8"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [ 17.386786479432683, 49.2004365920024]
                    }
                }]
            }
        },
        "layout": {
            "icon-image": "{icon}",
			"icon-size":0.3,
            "icon-offset": [45, 10],
        }
    });
});


// When a click event occurs near a place, open a popup at the location of
// the feature, with description HTML from its properties.
map.on('click', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places', 'vystaviste', 'kostelany'] });

    if (!features.length) {
        return;
    }

    var feature = features[0];

    // Populate the popup and set its coordinates
    // based on the feature found.
    var popup = new mapboxgl.Popup()
        .setLngLat(feature.geometry.coordinates)
        .setHTML(feature.properties.description)
        .addTo(map);
});

// Use the same approach as above to indicate that the symbols are clickable
// by changing the cursor style to 'pointer'.
map.on('mousemove', function (e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['places', 'vystaviste', 'kostelany'] });
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';
});

// Add zoom and rotation controls to the map.
map.addControl(new mapboxgl.NavigationControl());

map.addControl(new mapboxgl.FullscreenControl());

// Add geolocate control to the map.
map.addControl(new mapboxgl.GeolocateControl());

// disable map rotation using right click + drag
map.dragRotate.disable();

// disable map rotation using touch rotation gesture
map.touchZoomRotate.disableRotation();

</script>

</body>
</html>
